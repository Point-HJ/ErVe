<!DOCTYPE html>
<html lang="en">
<head>
    <title>Customer</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link href="Content/New.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
            var $customers = $('#customers');
            var $CustomerName = $('#customername');
            var $Company = $('#company');
            var $CC = $('#cc');

            function addCustomer(customer) {
                $customers.append('<li><h4>' + customer.CustomerName + ' ' + customer.Company + ' cc' + customer.CC + ' </h4></li>');
            }

            $.ajax({
                type: 'GET',
                url: 'api/Customers',
                success: function (customers) {
                    $.each(customers, function (i, customer) {
                        addCustomer(customer);
                    });
                },
                error: function () {
                    alert('Virhe ladattaessa yrityksiä')
                }
            });
            $('#addCustomer').on('click', function () {
                var customer = {
                    CustomerName: $CustomerName.val(),
                    Company: $Company.val(),
                    CC: $CC.val()
                };

                $.ajax({
                    type: 'post',
                    url: 'api/customers',
                    data: customer,
                    success: function (newcust) {
                        addCustomer(newcust);
                         location.reload();
                    },
                    error: function () {
                        alert('virhe lisätessä uutta yritystä');
                    }
                });
                 
            });
           
        });

    </script>

</head>
<body>

    <div class="grid-container">

        <div class="item1">Yritykset</div>
        <br />  
        <br />
        <div class="item2">
            <label for="customer">Yrityksen nimi</label>
            <input type="text" id="customername" style="color:black">
            <br />
            <label for="customer">Yritystunnus</label>
            <input type="text" id="company" style="color:black">
            <br />
            <label for="customer">Kustannuspaikka</label>
            <input type="text" id="cc" style="color:black">
            <br />
            <button class="btn button1" id="addCustomer">Lisää uusi yritys</button>
            <ul style="list-style-type:none;" id="customers"></ul>
        </div>

    </div>
</body>
</html>